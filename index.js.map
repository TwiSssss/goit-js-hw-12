{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from \"axios\";\n\nconst API_KEY = \"48857458-08a5976c2d7ede66ca4c44a57\";\nconst BASE_URL = \"https://pixabay.com/api/\";\nconst perPage = 40;\n\nexport const getImages = (wordKey, page = 1) => {\n    return axios\n        .get(BASE_URL, {\n            params: {\n                key: API_KEY,\n                q: wordKey,\n                image_type: \"photo\",\n                orientation: \"horizontal\",\n                safesearch: true,\n                per_page: perPage,\n                page: page,\n            },\n        })\n        .then((response) => {\n            return {\n                images: response.data.hits,\n                totalHits: response.data.totalHits,\n            };\n        })\n        .catch((err) => {\n            console.error(err);\n            return [];\n        });\n};\n","export function photoTemplate(image) {\n    return `\n<li class=\"gallery-item\">\n    <a class=\"gallery-link\" href=\"${image.largeImageURL}\">\n        <img class=\"gallery-image\" src=\"${image.webformatURL}\" alt=\"${image.tags}\" />\n        <div class=\"info\">\n            <p>\n                <b>Likes</b><br>${image.likes}\n            </p>\n            <p>\n                <b>Views</b><br>${image.views}\n            </p>\n            <p>\n                <b>Comments</b><br>${image.comments}\n            </p>\n            <p>\n                <b>Downloads</b><br>${image.downloads}\n            </p>\n        </div>\n    </a>\n</li>\n`;\n}\nexport function photosTemplate(images) {\n    return images.map(photoTemplate).join(\"\");\n}\n","import iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\nimport { getImages } from \"./js/pixabay-api\";\nimport { photosTemplate } from \"./js/render-functions\";\n\nlet lightbox = new SimpleLightbox(\".gallery-item a\", {\n    captionsData: \"alt\",\n    captionDelay: 250,\n});\n\nconst refs = {\n    gallery: document.querySelector(\".gallery\"),\n    searchMenu: document.querySelector(\".search-menu\"),\n    searchBtn: document.querySelector(\".search-btn\"),\n    searchInput: document.querySelector(\".search-input\"),\n    loader: document.querySelector(\".loader\"),\n    btnLoadMore: document.querySelector(\".btn-load\"),\n};\n\nconst params = {\n    query: \"\",\n    page: 1,\n    total: 0,\n    perPage: 40,\n};\n\nrefs.searchMenu.addEventListener(\"submit\", async (event) => {\n    event.preventDefault();\n    const wordKey = refs.searchInput.value.trim();\n    params.page = 1;\n    if (!wordKey) {\n        return;\n    }\n    params.query = wordKey;\n    refs.gallery.innerHTML = \"\";\n    refs.searchInput.value = \"\";\n    hideLoadMoreBtn();\n    refs.loader.style.display = \"inline-block\";\n        try {\n        const result = await getImages(wordKey, params.page);\n        params.total = result.totalHits;\n        if (result.images.length === 0) {\n            iziToast.error({\n                message: \"Sorry, there are no images matching your search query. Please try again!\",\n                position: \"topRight\",\n            });\n            refs.gallery.innerHTML = \"\";\n        } else {\n            refs.gallery.innerHTML = photosTemplate(result.images);\n            lightbox.refresh();\n            checkBtnStatus();\n        }\n    } catch (err) {\n        console.error(err);\n        refs.gallery.innerHTML = \"\";\n    } finally {\n        refs.loader.style.display = \"none\";\n    }\n});\n\nrefs.btnLoadMore.addEventListener(\"click\", async () => {\n    const wordKey = params.query;\n    params.page += 1;\n    hideLoadMoreBtn();\n    refs.loader.style.display = \"inline-block\";\n    try {\n        const result = await getImages(wordKey, params.page);\n        params.total = result.totalHits;\n        const markup = photosTemplate(result.images);\n        refs.gallery.insertAdjacentHTML(\"beforeend\", markup);\n        lightbox.refresh();\n        window.scrollBy({\n            top: 650,\n            left: 100,\n            behavior: \"smooth\",\n        });\n    } catch (err) {\n        console.error(err);\n    } finally {\n        refs.loader.style.display = \"none\";\n        checkBtnStatus();\n    }\n});\n\nfunction showLoadMoreBtn() {\n    refs.btnLoadMore.style.display = \"block\";\n}\n\nfunction hideLoadMoreBtn() {\n    refs.btnLoadMore.style.display = \"none\";\n}\n\nfunction checkBtnStatus() {\n    const perPage = 40;\n    const total = params.total;\n    const maxPage = Math.ceil(total / perPage);\n    if (params.page >= maxPage) {\n        hideLoadMoreBtn();\n        iziToast.info({\n            message: \"We're sorry, but you've reached the end of search results.\",\n            position: \"topRight\",\n        });\n    } else {\n        showLoadMoreBtn();\n    }\n}\n"],"names":["API_KEY","BASE_URL","perPage","getImages","wordKey","page","axios","response","err","photoTemplate","image","photosTemplate","images","lightbox","SimpleLightbox","refs","params","event","hideLoadMoreBtn","result","iziToast","checkBtnStatus","markup","showLoadMoreBtn","total","maxPage"],"mappings":"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"}